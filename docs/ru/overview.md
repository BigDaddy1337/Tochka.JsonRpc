# Обзор

Это набор библиотек для простого создания JSON-RPC 2.0 API аналогично тому, как принято работать с ASP.Net Core (MVC/REST).
Достаточно будет добавить пару строк в `Program.cs` и использовать другой базовый класс в своих контроллерах.

**Примечание:** в этой доке под JSON-RPC подразумевается версия `2.0`.


## Начало работы

[Быстрый старт для Сервера](server/quickstart)

[Быстрый старт для Клиента](client/quickstart)


## Отличительные особенности

* Простая установка
* Заводится сразу, с адекватными настройками по умолчанию
* Понятные параметры, например настраиваемая сериализация и маршрутизация
* Можно просто писать стандартные контроллеры API, без привязки к JSON-RPC
* Можно использовать и REST и JSON-RPC в одном приложении, они не мешают друг другу
* Поддерживается разная конфигурация для разных урлов/контроллеров/методов
* Сервер использует стандартную маршрутизацию, биндинг моделей и другие встроенные штуки без велосипедов, не ломая пайплайн
* Клиент основан на современных HttpClient/HttpClientFactory
* Все расширяемо через DI, можно добиться нестандартного поведения при необходимости
* Поддерживаются batch, notification, параметры в виде массива и остальные странности JSON-RPC, при этом они скрыты от пользователя
* Можно возвращать не-json данные, если нужно. Например, редирект для браузера или отправка бинарного файла
* Batch-и обрабатываются как если бы это были отдельные запросы, поэтому аутентификация и другие мидлвари/фильтры работают независимо
* Клиент предоставляет полезную информацию при возникновении ошибок
* В мидлварях и контроллерах доступны и сырой, и типизированный JSON-RPC запрос/ответ
* Простая расширяемость: общие модели и вспомогательные методы не привязаны к пакетам клиента или сервера
* Поддержка автодокументации: [Swagger/OpenAPI](https://swagger.io/) и [OpenRPC](https://open-rpc.org/)
* Поддержка версионирования: [API Versioning](https://github.com/dotnet/aspnet-api-versioning)


## Ограничения и потенциальные улучшения

Некоторые фичи запланированы, но еще не реализованы. Изначальной задачей было просто заставить все работать,
а дорабатывать уже после релиза, когда у нас будет обратная связь.

* На текущий момент решение протестировано только на ASP.Net Core `6.0`. Версии 1.x являются устаревшими и имеют низкую производительность, но работают на `2.2-6.0`
* Batch-запросы обрабатываются последовательно
* `id` с плавающей точкой не поддерживаются


## Nuget пакеты

| ссылка| описание |
| - | - |
| [Tochka.JsonRpc.Server](https://www.nuget.org/packages/Tochka.JsonRpc.Server/) | Мидлварь и сервисы для ASP.Net Core |
| [Tochka.JsonRpc.Swagger](https://www.nuget.org/packages/Tochka.JsonRpc.Swagger/) | Генератор документации Swagger |
| [Tochka.JsonRpc.OpenRpc](https://www.nuget.org/packages/Tochka.JsonRpc.OpenRpc/) | Генератор документации OpenRPC |
| [Tochka.JsonRpc.Client](https://www.nuget.org/packages/Tochka.JsonRpc.Client/) | Основа для JSON-RPC клиентов с обработкой ошибок |
| [Tochka.JsonRpc.Common](https://www.nuget.org/packages/Tochka.JsonRpc.Common/) | Модели и методы позволяющие расширять функционал без прямой зависимости от сервера или клиента |
