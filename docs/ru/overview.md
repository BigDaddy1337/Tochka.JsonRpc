# Обзор

Это набор библиотек для простого создания JSON-RPC 2.0 API аналогично тому, как принято работать с ASP.Net Core (MVC/REST).
Вам понадобится всего лишь добавить пару строк в `Program.cs` и использовать другой базовый класс в своих контроллерах.

**Замечание:** все упоминания протокола JSON-RPC без версии в данном документе подразумевают версию `2.0`.


## Начало работы

[Краткое руководство для Сервера](server/quickstart)

[Краткое руководство для Клиента](client/quickstart)


## Отличительные особенности

* Простая установка
* Возможность использования без конфигурации с адекватными значениями по умолчанию
* Понятные настройки, такие как настраиваемая сериализация и маршрутизация
* Вы просто пишите стандартные контроллеры API, без привязки к JSON-RPC
* Можете использовать и REST и JSON-RPC в одном приложении, так как они не воздействуют друг на друга
* Можете использовать разную конфигурацию для разных контроллеров и обработчиков
* Сервер использует стандартную маршрутизацию, привязку моделей и другие встроенные инструменты пайплайна без велосипедов и конфликтов
* Клиент основан на актуальных HttpClient/HttpClientFactory
* Можно добиться любого поведения за счет подмены сервисов в DI
* Поддерживаются батчи, уведомления, массивы параметров и остальные возможности JSON-RPC, при этом они скрыты от пользователя
* Поддерживается возможность вернуть данные в отличном от JSON-RPC формате, например для редиректа в браузере или отправки бинарного файла
* Батчи обрабатываются аналогично отдельным запросам, за счет чего аутентификация и другие мидлвари/фильтры работают независимо
* Клиент предоставляет полезную информацию при возникновении ошибок
* В мидлварях и контроллерах доступны и сырой, и типизированный JSON-RPC запрос/ответ
* Простая расширяемость: общие модели и вспомогательные методы не привязаны к пакетам клиента или сервера
* Поддержка автодокументации: [Swagger/OpenAPI](https://swagger.io/) и [OpenRPC](https://open-rpc.org/)


## Ограничения и потенциальные улучшения

Некоторые функции запланированы, но еще не реализованы. Изначальной задачей было просто создать рабочий продукт,
а затем улучшать его возможности после релиза, когда мы получим обратную связь по использованию.

* На текущий момент решение протестировано только на ASP.Net Core `6.0`. Версии 1.x являются устаревшими и имеют низкую производительность, но работают на `2.2-6.0`
* Батчи обрабатываются последовательно
* `id` с плавающей точкой не поддерживаются


## Nuget пакеты

| ссылка| описание |
| - | - |
| [Tochka.JsonRpc.Server](https://www.nuget.org/packages/Tochka.JsonRpc.Server/) | Мидлварь и сервисы для ASP.Net Core |
| [Tochka.JsonRpc.Swagger](https://www.nuget.org/packages/Tochka.JsonRpc.Swagger/) | Генератор документации Swagger |
| [Tochka.JsonRpc.OpenRpc](https://www.nuget.org/packages/Tochka.JsonRpc.OpenRpc/) | Генератор документации OpenRPC |
| [Tochka.JsonRpc.Client](https://www.nuget.org/packages/Tochka.JsonRpc.Client/) | Базовый класс для JSON-RPC клиента с обработкой ошибок |
| [Tochka.JsonRpc.Common](https://www.nuget.org/packages/Tochka.JsonRpc.Common/) | Модели и методы позволяющие расширять функционал без прямой зависимости от сервера или клиента |
