# Клиент/Сериализация

В данной библиотеке объекты JSON-RPC запроса/уведомления/ответа называются **"заголовками"**, и они сериализуются отдельно от объектов параметров/результата/ошибки. Вы можете влиять, на то как сериализуются ваши данные, не заботясь о заголовках.

**Замечание:** в данном документе и сериализация, и **де**сериализация упоминаются просто как сериализация для простоты.

## Сериализация заголовков

В спецификации JSON-RPC есть некоторые странности, которые не очень хорошо сочетаются с сильной статической типизацией и автоматическими конвертерами вроде  System.Text.Json:

* Поле `id` запроса может содержать число, строку или null и должно быть возвращено в ответе в изначальном виде 
* Если поля `id` нет, то это уведомление
* Поля ответа `result` и `error` являются взаимоисключающими и отображают успех или ошибку
* Поле `params` может содержать или объект или массив
* Весь запрос может быть массивом, означая, что это батч

Адаптация данных правил к типам языка C# требовала некоторых ухищрений и не должна влиять на сериализацию пользовательских данных.
Также, формат заголовков (например snake_case) фиксирован, из-за чего нет нужды конфигурировать его. 

Данные аспекты обрабатываются благодаря `HeadersJsonSerializerOptions` и дополнительным конвертерам. Вам не нужно использовать их в своем коде.

## Сериализация параметров/результата/ошибок

С другой стороны, вам может понадобиться продвинутая сериализация JSON (kebab-case, дополнительные конвертеры, обработка DateTime и тп) для ваших данных.

Используйте свойство `DataJsonSerializerOptions` для настройки сериализации данных.

Вы можете использовать одно из предоставленных в классе `JsonRpcSerializerOptions` значений или создать собственный объект `JsonSerializerOptions`.
